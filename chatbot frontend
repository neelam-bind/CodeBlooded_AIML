import streamlit as st
import requests

# Flask API URL
API_URL = "http://localhost:5000/chat"

# Streamlit UI
st.set_page_config(page_title="Career Counseling Chatbot", layout="wide")

st.title("ðŸ¤– Career Counseling Chatbot")
st.markdown("Ask me anything about careers, skills, job trends, or higher studies!")

# Chat Interface
if "messages" not in st.session_state:
    st.session_state["messages"] = [{"role": "bot", "text": "Hi! How can I help you today?"}]

# Display chat messages
for msg in st.session_state["messages"]:
    if msg["role"] == "user":
        st.markdown(f"**You:** {msg['text']}")
    else:
        st.markdown(f"**Bot:** {msg['text']}")

# User input
user_input = st.text_input("You:", "")
if st.button("Send"):
    if user_input:
        st.session_state["messages"].append({"role": "user", "text": user_input})
        response = requests.post(API_URL, json={"query": user_input}).json()
        st.session_state["messages"].append({"role": "bot", "text": response["response"]})
        st.experimental_rerun()
